---
title: "Second Assignment"
bibliography: bibliography.bib
date: "9 October 2014"
output:
  pdf_document:
    fig_caption: yes
    number_sections: yes
    toc: yes
  html_document:
    toc: yes
  word_document: default
authors: "Giulia Minnucci, Rose Camille Vincent, Daniel Jemberu"

---
#Research question and Methodology

As stated in previous assignment, our research project aims to look at the impact of decentralization on health provision in Benin. Access to basic health-related services has been one of the core Millenium Development Goals. It is also regarded as basic human rights and promoted by international organizations. For the past decade, governments and policy makers in developing countries, including Benin, have invested in improving basic sanitation and health-related facilities. Decentralization and devolution have been important channels in this process. 

In Benin, the legal provision on decentralization has transfered health-related competencies to sub-national entities. Since the year 2002, municipal governments are increasingly responsible for providing basic infrastructures such as water access etc. Yet, given that municipalities are financially incapable to meeting their assignment, the central government, with the help of international development agencies have increasingly transfered grants allowting local governments to face basic needs, including health provisions. Decentralization is said to have many benefits in the country where it is implemented; as health services is close to microeconomic, it is therefore more suitable to bring on a micro level. For this reason, we have decided to bring these two sides in our research, by asking the question: **What impact does decentralization have on the provision of health-related services and infrastructures in Benin**.

Studying both decentralization and health provision is a very challenging exercice as it requires consistent and reliable microeconomic data which are, very often, not openly avaible or not consistent. Therefore, in order to enhance the reliability of our study to better analyze the trends over the recent years, we have decided to combine a macro and a micro perspective. The first section below uses a macro approach, in other words we will look at overall health expenditures and provision of health-services in Benin over the years 2005-2013 (when the data is availble). There we make use of some descriptive statistics. The Second part of this paper looks at health provision on a micro level. We will be analyzing the impact of decentralization on elements that revolve around health care, like the number of facilities, improved health conditions etWe will further based our indicators and methodology on existing theoretical and empirical literatures on welfare states, poverty and health.  

#Macro perspective: Data collection and cleaning 

In this section, we use data analytics tools to scrape openly available data on Benin's health-related expenditures and services. We first extracted a dataset from the World Bank which include indicators on Public Health Expenditure, Health Expenditure Per Capita and Improved Sanitation facilities overover a seven year timespan (2005:2011). The variables are defined as follow: 

(i) **health expenditure per capita (SH.XPD.PCAP)**, meaninig the sum of public and private health expenditures as a ratio of total population. It covers the provision of health services (preventive and curative), family planning activities, nutrition activities, and emergency aid designated for health but does not include provision of water and sanitation. Data are in current U.S. dollars.

(ii) **public health expenditure (SH.XPD.PUBL)**,which consists of recurrent and capital spending from government (central and local) budgets, external borrowings and grants (including donations from international agencies and nongovernmental organizations), and social (or compulsory) health insurance funds. 

(iii) **improved sanitation facilities(SH.STA.ACSN)**, which actually refers to the access to improved sanitation facilities as the percentage of the population using improved sanitation facilities. The indicator includes flush/pour flush (to piped sewer system, septic tank, pit latrine), ventilated improved pit (VIP) latrine, pit latrine with slab, and composting toilet.

As mentionned from our research proposal decentralization in Benin only begun in the 2000s, and therefore it's at its very early stage. As the following graphs (using ggplot in R) demontrate, there has been a considerable increase in health expenditure in the past few years. Since health expenditures is a decentralized process, we could potentially argue that there is a correlation between health provision and the process of decentralization. Analyzing the micro data shall allow for a confirmation or rejection of this assumption. 

Firstly, we need to load the dataset and eliminate the column we do not need.

```{r, echo=FALSE}
library(WDI)
healthpublicexpend<-WDI(indicator= c('SH.XPD.PUBL','SH.XPD.PCAP','SH.STA.ACSN'))
Benin<-subset(healthpublicexpend,country=='Benin')
Benin$iso2c<-NULL
names(Benin)[names(Benin)=="year"] <- "Year"
<<<<<<< HEAD
names(Benin)[names(Benin)=="SH.XPD.PUBL"] <- "Public.Health.Expenditure"
names(Benin)[names(Benin)=="SH.XPD.PCAP"] <- "Health.Expenditure.Per.Capita"
names(Benin)[names(Benin)=="SH.STA.ACSN"] <- "Improved.Sanitation.Facilities"
install.packages("ggplot2")
library(ggplot)
library(ggplot2)
ggplot(data=Benin, aes(x=Year,y=Public.Health.Expenditure)) + geom_line() + geom_point() + theme_bw(base_size = 13) + ggtitle("Trend over the years\n")
ggplot(data=Benin, aes(x=Year,y=Health.Expenditure.Per.Capita)) + geom_line() + geom_point() + theme_bw(base_size = 13) + ggtitle("Trend over the years\n")
ggplot(data=Benin, aes(x=Year,y=Improved.Sanitation.Facilities)) +geom_line() + geom_point() + theme_bw(base_size = 13) + ggtitle("Trend over the years")
```


This dataset includes these variables over a seven year timespan (2005:2011): 

(i) **health expenditure per capita (SH.XPD.PCAP)**, meaninig the sum of public and private health expenditures as a ratio of total population. It covers the provision of health services (preventive and curative), family planning activities, nutrition activities, and emergency aid designated for health but does not include provision of water and sanitation. Data are in current U.S. dollars.

(ii) **public health expenditure (SH.XPD.PUBL)**,which consists of recurrent and capital spending from government (central and local) budgets, external borrowings and grants (including donations from international agencies and nongovernmental organizations), and social (or compulsory) health insurance funds. 

(iii) **improved sanitation facilities(SH.STA.ACSN)**, which actually refers to the access to improved sanitation facilities as the percentage of the population using improved sanitation facilities. The indicator includes flush/pour flush (to piped sewer system, septic tank, pit latrine), ventilated improved pit (VIP) latrine, pit latrine with slab, and composting toilet.

When the daset is cleaned, it is usrful to have some graphs that show how these variables have been changing.

```{r, echo=FALSE}
library("ggplot2", lib.loc="/Library/Frameworks/R.framework/Versions/3.1/Resources/library")
ggplot(data=Benin, aes(x=Year,y=SH.XPD.PUBL)) + geom_line() + geom_point() + theme_bw(base_size = 13) + ggtitle("Trend over the years")

ggplot(data=Benin, aes(x=Year,y=SH.XPD.PCAP)) +geom_line() + geom_point() + theme_bw(base_size = 13) + ggtitle("Trend over the years")
ggplot(data=Benin, aes(x=Year,y=SH.STA.ACSN)) +geom_line() + geom_point() + theme_bw(base_size = 13) + ggtitle("Trend over the years")
```

>>>>>>> origin/master
The second dataset is taken from the WHO indicators, in particular, from the Global Health Obervatory Data Repository. What we want is the dataset that refers to the density of health infrastructures per 100000 population, including:

(i) Health posts, that  are either community centres or health environments with a very limited number of beds with limited curative and preventive care resources normally assisted by health workers or nurses,

(ii) Health centers,which includes the number of health centres from the public and private sectors, per 100,000 population

(iii) Number of district/rural hospitals from the public and private sectors, per 100,000 population,

(iv) Number of provincial hospitals from the public and private sectors, per 100,000 population,

(v) Number of specialized hospitals delivering mainly tertiary care from the public and private sectors, per 100,000 population. These specialized hospitals could be regional, specialized, research hospitals or Federal/National Institutes.

(vi) Number of specialized hospitals delivering mainly tertiary care from the public and private sectors, per 100,000 population. These specialized hospitals could be: regional, specialized, research hospitals or Federal/National Institutes.

However, these variables are only know for the years 2010 and 2013.
We import this Dataset with an URL from the WHO website, that we call infrastructures.From this dataset we definetly have to extract only the country we are interested in (BEN).
From this point, the dataset has to be cleaned of all those columns that we really don't need, since the original one shows also elements such as if it was published, comments,NA elements etc...

```{r}
infrastructures <- read.csv("http://apps.who.int/gho/athena/data/data-text.csv?target=GHO/DEVICES01,DEVICES02,DEVICES03,DEVICES04,DEVICES05&profile=text&filter=COUNTRY:*;REGION:AFR;REGION:AMR;REGION:SEAR;REGION:EUR;REGION:EMR;REGION:WPR")
Benininfra<-subset(infrastructures,Country=='Benin')
Benininfra$PUBLISH.STATES<-NULL
Benininfra$WHO.region<-NULL
Benininfra$Low<-NULL
Benininfra$High<-NULL
Benininfra$Comments<-NULL
library(tidyr)
library(dplyr)
messy<-data.frame(
  Indicator=c("District/rural hospitals", "Health centres","Provincial hospitals","Specialized hospitals","Provincial hospitals","Specialized hospitals"),
  Year=c(2010,2010,2010,2010,2013,2013),
  Country=c("Benin","Benin","Benin","Benin","Benin","Benin"),
  Display.Value=c(0.29,6.36,0.06,0.12,0.05,0.11)
  )
tidy<-spread(messy,Indicator,Display.Value)
```

##Merging datasets

Once we have our datasets, it is useful to merge them together so as to work easily and quickly with one dataset that would include all the needed variables.

```{r}
names(Benin)[names(Benin)=="country"] <- "Country"
total<-merge(Benin,tidy, by=c("Country","Year"),all=TRUE)
```

#Micro perspective

In this section, we explore decentralization and health provision at the 77 municipalities in Benin. The datasets on local finances are obtained from the National Commission on Local Finances of Benin. Health-related expenditures and provision are from Benin's Integrated Modular Surveys on Household Living Conditions (EMICoV) and the Demographic and Health Survey.

##Description of Variables 

###Independent variable: Decentralization 

Decentralization typically defined in public planning, management and decision making as the transfer of authority and power from higher to lower levels of governing or from national to sub-national levels[@rondinelli1983collins]. It has different characteristics for different writers as describe as delegation,devaluation,de-concentration,and privatization of responsibility and authority of tasks to lower level of administration. Decentralization system involves two different measures: level and degree. Decentralizations may occur at system or organization level[@mintzberg1979].Degree can be defined as the distribution of power over the decision made inside an organization.This has led to long debate in related literature and few argument on the best measurement. Due to this high degree of complexity, which encompasses a number of political, fiscal and administrative dimension, it is difficult to assess and measure the outcome of decentralization in an empirical study. For the purpose of this exercise, we propose here to use a Revenue authonomy(RA) measure approch  used by [@akai2002sakata] and [@habibi2003etal] to proxy for decentralization. A large part of the debate on decentralization measurement regards the choice between revenue versus expenditure decentralization. Because decentralized health provision implies both decentralized revenues and expenditures, we have chosen this proxy which accounts for both. Its measurement implies taking the ratio of own-source revenues to the total of expenditures for each municipality over the year 2005 to 2011. The data on local finances are obtained from the National Commission on local finances. 


###Dependent variables

Like decentralization, it is very challenging to find a composite proxy for health provision. Drawing from Benin's Integrated Households Survey (EMICoV) and the Demographic and Health Survey, we have decided to focus on some key variables which include (i) the access to basic sanitation services: *access to water*, *access to toilet facilities*, (ii) access to health-related infrastructure *water provision infrastructure*, *hospital*. 

###Explanatory variables

As stated from our proposal, we will also take into account heterogeneity between the municipalities. For this reason, as so far, we have decided to include population, population density, per capita consumption, households health consumption, indicators on poverty, literacy rate, as well as the percentage of households which favor decentralization in each municipality. These control variables are drawn from Benin's Integrated Modular Surveys on Households Living Conditions (EMICoV)

#Basic Regression models 
```{r, echo=FALSE}
decentral <- read.csv("~/GitHub/Third_Assignment/decentral.csv")
health <- read.csv("~/GitHub/Third_Assignment/health.csv")
decenthealth <-merge(decentral,health, by=c("Year", "ID", "Cities"), all=TRUE)
library(ggplot2)

ggplot(data=decenthealth, aes(x=Cities,y=decentralization)) + geom_point() + theme_bw(base_size = 13) + ggtitle("Degree of decentralization\n")

pkgs <- c('knitr', 'stargazer')
library(car)


# Estimate model
R1water <- lm(pop_wateraccess ~ decentralization, data = decenthealth)
summary(R1water)
R2water <- lm(pop_wateraccess ~ decentralization + population + Density + Year, data = decenthealth)
summary(R2water)
labels <- c('(Intercept)', 'Decentralization', 'Population', 'Population Density')
library(stargazer)
stargazer::stargazer(R1water, R2water, covariate.labels = labels,
                     title = 'Effect of decentralization on water access',
                     digits = 2, type = 'latex', header = FALSE)


R1toilet <- lm(pop_toiletacess ~ decentralization, data = decenthealth)
summary(R1toilet)
R2toilet <- lm(pop_toiletacess ~ decentralization + population + Density + Year, data = decenthealth)
summary(R2toilet)
labels <- c('(Intercept)', 'Decentralization', 'Population', 'Population Density')
library(stargazer)
stargazer::stargazer(R1toilet, R2toilet, covariate.labels = labels,
                     title = 'Effect of decentralization on toilet access',
                     digits = 2, type = 'latex', header = FALSE)

R1soneb <- lm(connect_soneb ~ decentralization, data = decenthealth)
summary(R1soneb)
R2soneb <- lm(connect_soneb ~ decentralization + population + Density + Year, data = decenthealth)
summary(R2soneb)
labels <- c('(Intercept)', 'Decentralization', 'Population', 'Population Density')
library(stargazer)
stargazer::stargazer(R1soneb, R2soneb, covariate.labels = labels,
                     title = 'Effect of decentralization on water delivery infrastructure',
                     digits = 2, type = 'latex', header = FALSE)

R1soneb <- lm(pubhosp ~ decentralization, data = decenthealth)
summary(R1pubhosp)
R2soneb <- lm(pubhosp ~ decentralization + population + Density + Year, data = decenthealth)
summary(R2pubhosp)
labels <- c('(Intercept)', 'Decentralization', 'Population', 'Population Density')
library(stargazer)
stargazer::stargazer(R1pubhosp, R2pubhosp, covariate.labels = labels,
                     title = 'Effect of decentralization on health services infrastructure',
                     digits = 2, type = 'latex', header = FALSE)
```




